<!DOCTYPE html>





<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Lobster:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    save_scroll: true,
    copycode: {"enable":true,"show_result":true,"style":"flat"},
    fancybox: false,
    mediumzoom: true,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    }
  };
</script>

  <meta name="description" content="Ray tracing was put forth in last century and has been used in film industry for decades. Even though it is a good way to achieve Global Illumination, it is not used in video games yet because games a">
<meta name="keywords" content="Computer Graphics,OpenGL">
<meta property="og:type" content="article">
<meta property="og:title" content="Computer Graphics Review#3 - Ray Tracing In One Weekend 1 of 2">
<meta property="og:url" content="http://PokhoOfSCUT.github.io/CG4-RayTracing.html">
<meta property="og:site_name" content="Rhys&#39;s">
<meta property="og:description" content="Ray tracing was put forth in last century and has been used in film industry for decades. Even though it is a good way to achieve Global Illumination, it is not used in video games yet because games a">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://i.postimg.cc/JhkHqdQm/ray-tracing.png">
<meta property="og:image" content="https://i.postimg.cc/FzB5ZTKj/ray.png">
<meta property="og:image" content="https://i.postimg.cc/1Rp4cDBF/unit-sphere.png">
<meta property="og:image" content="https://i.postimg.cc/BZyrCXcM/gamma.png">
<meta property="og:image" content="https://i.postimg.cc/vBD7WQVb/reflect.png">
<meta property="og:image" content="https://i.postimg.cc/pr3t2XDT/result.png">
<meta property="og:updated_time" content="2019-11-12T11:38:39.131Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Computer Graphics Review#3 - Ray Tracing In One Weekend 1 of 2">
<meta name="twitter:description" content="Ray tracing was put forth in last century and has been used in film industry for decades. Even though it is a good way to achieve Global Illumination, it is not used in video games yet because games a">
<meta name="twitter:image" content="https://i.postimg.cc/JhkHqdQm/ray-tracing.png">
  <link rel="canonical" href="http://PokhoOfSCUT.github.io/CG4-RayTracing">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Computer Graphics Review#3 - Ray Tracing In One Weekend 1 of 2 | Rhys's</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <div class="container sidebar-position-left">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Rhys's</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Welcome to Rhys's</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-schedule">
      
    

    <a href="/schedule/" rel="section"><i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>Schedule</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-sitemap">
      
    

    <a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>Sitemap</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    
    <div class="reading-progress-bar"></div>

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://PokhoOfSCUT.github.io/CG4-RayTracing.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Rhys Chen">
      <meta itemprop="description" content="Do my best, so I cannot blame myself for anything.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Rhys's">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">Computer Graphics Review#3 - Ray Tracing In One Weekend 1 of 2

            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-11-03 18:11:33" itemprop="dateCreated datePublished" datetime="2019-11-03T18:11:33+08:00">2019-11-03</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-11-12 19:38:39" itemprop="dateModified" datetime="2019-11-12T19:38:39+08:00">2019-11-12</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Computer-Graphics/" itemprop="url" rel="index"><span itemprop="name">Computer Graphics</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Ray tracing was put forth in last century and has been used in film industry for decades. Even though it is a good way to achieve <code>Global Illumination</code>, it is not used in video games yet because games are realtime, the high computational cost of ray tracing makes it diffult and appropriate for games. However, as Nvidia introduced a new series of advanced graphics cards, which completely changed the situation, realtime ray tracing finally makes it to the game industry.<a id="more"></a></p>
<hr>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>What is ray tracing?</p>
<p>Simply saying, ray tracing is a rendering technique that simulates the process of natural light formation in real life in a reverse way. In the real world, a light ray emitted by a light source goes directly or bounces into our eyes. If we start at the light source to trace all the light rays, work can be complicated since we have to deal with every hit created by the intersection between a light ray and an object and there can be millions of objects and light rays in a large scene. A viable solution is to do this in a reverse way: virtual camera (our eyes) emits a ray. Then the ray goes through the screen and hit an object, and finally we transform the light effect of the hit point to screen color.</p>
<p><img src="https://i.postimg.cc/JhkHqdQm/ray-tracing.png" alt></p>
<p>In the first episode of my review, I briefly talked about a rendering pipeline, which is called raster rendering: it treats objects as geometries formed by a bunch of triangles and map these triangles onto screen pixels along with their color information. It apply some lighting models to approximately shade the scene, which cannot reach the best photorealistic effect. Ray tracing apply an approach conforming to physics, leading to a much more beautiful outcome.</p>
<hr>
<p>&nbsp;</p>
<h2 id="How-To-Do"><a href="#How-To-Do" class="headerlink" title="How To Do"></a>How To Do</h2><p>I get into the ray tracing field with the help of <strong><em>Ray Tracing In One Weekend</em></strong>. It is a really good book, helping you learn how to do ray tracing rendering step by step from the very begining in a practical way. The author gives out all the code in detail, so I will not do that again here. What I mainly want to do is to write down some stuff in the book that I think is worth discussing.</p>
<h3 id="Ray-Presentation"><a href="#Ray-Presentation" class="headerlink" title="Ray Presentation"></a>Ray Presentation</h3><p>We use parametric form to present a ray: $p(t) = A + t*B$. A stands for the origin of the ray, and B stands for the direction of the ray (unit vector in most of cases).</p>
<p><img src="https://i.postimg.cc/FzB5ZTKj/ray.png" alt></p>
<p>Assume that we are going to render a picture in size of $200\times 100$. We already know that the origin (position of the virtual camera) is at $(0, 0, 0)$, to figure out the direction, we can simply find a point on the canvas and use the position as the direction vector remaining to be normalized. In this case, the direction will be:</p>
<pre class=" language-cpp"><code class="language-cpp">vec3 <span class="token function">lower_left_corner</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec3 <span class="token function">horizontal</span><span class="token punctuation">(</span><span class="token number">4.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec3 <span class="token function">vertical</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> nx <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> ny <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> ny <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nx<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">float</span> u <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">float</span><span class="token punctuation">(</span>nx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">float</span> v <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">float</span><span class="token punctuation">(</span>ny<span class="token punctuation">)</span><span class="token punctuation">;</span>

        vec3 direction <span class="token operator">=</span> lower_left_corner <span class="token operator">+</span> u <span class="token operator">*</span> horizontal <span class="token operator">+</span> v <span class="token operator">*</span> vertical<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>In this way, we can figure out every ray from the camera to the pixels.</p>
<h3 id="Intersection"><a href="#Intersection" class="headerlink" title="Intersection"></a>Intersection</h3><p>We will take sphere as an example to illustrate how to calculate intersections.</p>
<p>In graphics, we definitely want all the stuff to be in the form of vectors, which makes calculations much easier. Assume that the center of the sphere is at $(cx, cz, cy)$. It is easy for us to know that the formula of the sphere is: $(x-cx)(x-cx) + (y-cy)(y-cy) + (z-cz)(z-cz) = R*R$. If you were familiar with vector, you could easily tell that the left part of the formula is a dot product of two vectors, $(x-cx, y-cy, z-cz)$ and $(x-cx, y-cy, z-cz)$. Make the sphere center $c$ and the points on the sphere $p$, so the formula will be:</p>
<p>$$(p-c)\cdot (p-c) = R*R$$</p>
<p>If a ray intersected with the sphere at a point, the point would satisfy both formula, so we  put the ray formula in to the sphere’s:</p>
<p>$$(A+t\ast B-c)(A+t\ast B-c) = R*R$$</p>
<p>Expand it:</p>
<p>$$t^2B\cdot B+2t(A-C)\cdot (A-C)+C\cdot C-R\ast R = 0$$</p>
<p>Apparently, this is a quadratic equation with an unknown $t$. By judging its discriminant, we can therefore tell if the ray intersects with the sphere. If the discriminant is less than $0$, the ray do not intersect with and tangent to the sphere; if equals to $0$, the ray tangent to the sphere; if larger than $0$, the ray intersects with the sphere at two points.</p>
<p>Additionally, we may need the normals of the hitpoints. The calculation is simple: the hitpoint minus the center. We can use the quadratic formula to figure out the $t$ and then get the position. With the position, we can get the normal.</p>
<h3 id="Antialiasing"><a href="#Antialiasing" class="headerlink" title="Antialiasing"></a>Antialiasing</h3><p>In this case, the picture we try to render is in relatively low resolution, so using just one ray to sample a pixel is insufficient, causing the jagged look on the border. A feasible solution is to do multiple samples within the pixel and then blend them. In the code we talked about earlier, we sample the left lower corner of a pixel to shade. We can sample within a pixel by adding an offset within the range from $0$ to $1$. In order to achieve better blend effect, we utilize random generator to better simulate the distribution of the sample rays.</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// sample times</span>
<span class="token keyword">int</span> ns <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> ny <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nx<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        vec3 <span class="token function">world_color</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> s <span class="token operator">&lt;</span> ns<span class="token punctuation">;</span> s<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">float</span> u <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token function">drand48</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">float</span><span class="token punctuation">(</span>nx<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">float</span> v <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token function">drand48</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">float</span><span class="token punctuation">(</span>ny<span class="token punctuation">)</span><span class="token punctuation">;</span>

            world_color <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">color</span><span class="token punctuation">(</span><span class="token function">ray</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        world_color <span class="token operator">/</span><span class="token operator">=</span> ns<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="Diffuse-Material"><a href="#Diffuse-Material" class="headerlink" title="Diffuse Material"></a>Diffuse Material</h3><p>A diffuse color modulate its surrounding color with its intrinsic color. Light rays that reflect off a diffuse surface have their direction randomized. We’ve talked about this in previous episodes of BRDF. Because of the existence of subsurfaces, the reflected light rays are barely uniform. The random ray direction can be determined in this way: pick a random poitn $s$ from the unit sphere tangent to the hitpoint, and send a ray from the hitpoint $p$ to the random point $s$. This sphere has center $(p+N)$.</p>
<p><img src="https://i.postimg.cc/1Rp4cDBF/unit-sphere.png" alt></p>
<p>A rejection method is used to pick a random point in that unit sphere: first, pick a random point in the unit cube where $x$, $y$, and $z$ all range from $-1$ to $1$. We reject this point and try again if the point is outside the sphere.</p>
<p>To figure out the direction of the reflected ray, we cannot simply apply $s-p$ since p is in the coordinates whose origin is at the virtual camera position while the s is in the coordinates whose origin is at the center of the unit sphere. First, we have to find out the vector from camera origin to the unit sphere center, then add it to the vector from the center to the random point.</p>
<pre class=" language-cpp"><code class="language-cpp">vec3 target <span class="token operator">=</span> rec<span class="token punctuation">.</span>p <span class="token operator">+</span> rec<span class="token punctuation">.</span>normal <span class="token operator">+</span> <span class="token function">random_in_unit_sphere</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Finally we can figure out the reflected ray and apply iteration to keep tracing.</p>
<pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">return</span> <span class="token function">color</span><span class="token punctuation">(</span><span class="token function">ray</span><span class="token punctuation">(</span>rec<span class="token punctuation">.</span>p<span class="token punctuation">,</span> target <span class="token operator">-</span> rec<span class="token punctuation">.</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="Gamma-Correction"><a href="#Gamma-Correction" class="headerlink" title="Gamma Correction"></a>Gamma Correction</h3><p>The relation between actual illuminance and eye perception is different from that between actual illuminance and camera perception. It is obvious in the picture below that when in a dark environment, human eyes are more sensitive to the illuminance variance, making us see clearer in the dark. So actually, the picture rendered is darker than we see in real life. To make it more realistic, we have to apply gamma correction.</p>
<p><img src="https://i.postimg.cc/BZyrCXcM/gamma.png" alt></p>
<p>Assume that the actual illumiance is $i$, illuminance perceived by eyes is $i_e$, illuminance perceived by camera is $i_c$:</p>
<p>$$i_e = i^{\frac{1}{2.2}}$$</p>
<p>$$i_c = i$$</p>
<p>We can round it up to $2$, so the relation between $i_e$ and $i_c$ is simple as below:</p>
<p>$$i_e = i_c^{\frac{1}{2}}$$</p>
<p>It means that we can get a more accurate color by combining the square roots of its three components.</p>
<pre class=" language-cpp"><code class="language-cpp">world_color <span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token function">sqrt</span><span class="token punctuation">(</span>world_color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>world_color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>world_color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="Metal-Material"><a href="#Metal-Material" class="headerlink" title="Metal Material"></a>Metal Material</h3><p>Compared to the diffuse material, the reflected ray bounceing off the metal surface is not random.</p>
<p><img src="https://i.postimg.cc/vBD7WQVb/reflect.png" alt></p>
<p>Derived from the graph:</p>
<p>$$reflected = v - 2\ast (v\cdot n)\ast n$$</p>
<hr>
<p>&nbsp;</p>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p>So far, we have a very good rendered picture already.</p>
<p><img src="https://i.postimg.cc/pr3t2XDT/result.png" alt></p>
<hr>
<p>&nbsp;</p>
<h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2><p>It’s so amazing, isn’t it? With just a little code, we can consummate an offline ray tracing renderer with high quality. I just finished part of the book, there are still some insteresting contents remaining to be discovered. Keep up with the author, build up my own code, and try to solve and write down some problems. I think I’ve learned a lot through this process. I will keep on doing.</p>
<hr>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>[1] Ray Tracing In One Weekend - Peter Shirley<br>[2] <a href="https://www.cambridgeincolour.com/tutorials/gamma-correction.htm" target="_blank" rel="noopener">Gamma Correction</a></p>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/Computer-Graphics/" rel="tag"><i class="fa fa-tag"></i> Computer Graphics</a>
            
              <a href="/tags/OpenGL/" rel="tag"><i class="fa fa-tag"></i> OpenGL</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/UnityLab1.html" rel="next" title="Unity Lab - Non-Euclidean Space">
                  <i class="fa fa-chevron-left"></i> Unity Lab - Non-Euclidean Space
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/CG5.html" rel="prev" title="Computer Graphics Review#3 - Ray Tracing In One Weekend 2 of 2">
                  Computer Graphics Review#3 - Ray Tracing In One Weekend 2 of 2 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Rhys Chen</p>
  <div class="site-description motion-element" itemprop="description">Do my best, so I cannot blame myself for anything.</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span>
        
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/PokhoOfSCUT" title="GitHub &rarr; https://github.com/PokhoOfSCUT" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:xkxkxhxh1@outlook.com" title="E-Mail &rarr; mailto:xkxkxhxh1@outlook.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
  </div>



        </div>
      </div>
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Overview"><span class="nav-number">1.</span> <span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-To-Do"><span class="nav-number">2.</span> <span class="nav-text">How To Do</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Ray-Presentation"><span class="nav-number">2.1.</span> <span class="nav-text">Ray Presentation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Intersection"><span class="nav-number">2.2.</span> <span class="nav-text">Intersection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Antialiasing"><span class="nav-number">2.3.</span> <span class="nav-text">Antialiasing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Diffuse-Material"><span class="nav-number">2.4.</span> <span class="nav-text">Diffuse Material</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Gamma-Correction"><span class="nav-number">2.5.</span> <span class="nav-text">Gamma Correction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Metal-Material"><span class="nav-number">2.6.</span> <span class="nav-text">Metal Material</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Demo"><span class="nav-number">3.</span> <span class="nav-text">Demo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#End"><span class="nav-number">4.</span> <span class="nav-text">End</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">5.</span> <span class="nav-text">Reference</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rhys Chen</span>
</div>

        








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/mediumzoom/medium-zoom.min.js"></script>
  <script src="/lib/reading_progress/reading_progress.js"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/affix.js?v=7.3.0"></script>
  <script src="/js/schemes/pisces.js?v=7.3.0"></script>


<script src="/js/next-boot.js?v=7.3.0"></script>




  




























  

  
    
      <script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', function() {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    
  

  

  


  
  <script src="/js/scrollspy.js?v=7.3.0"></script>
<script src="/js/post-details.js?v=7.3.0"></script>


</body>
</html>
